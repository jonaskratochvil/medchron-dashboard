<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedChron Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback, createContext, useContext } = React;
        const { ChevronRight, ChevronLeft, ChevronDown, ChevronUp, Search, RefreshCw, 
                CheckCircle2, Clock, Hourglass, Info, AlertCircle, Home, Settings, 
                FileText, FolderOpen, Menu, User, Bell, PlayCircle, Plus, X, Check } = lucide;

        // Mock Data
        const users = [
            { id: '1', name: 'Olivia Carter' },
            { id: '2', name: 'Marcus Bennett' },
            { id: '3', name: 'Harper Reed' },
            { id: '4', name: 'System Admin' },
        ];

        const projectNames = [
            'Baker v. Ridgeview Apartments', 'Ramos v. Northgate Superstore',
            'Parker v. Sunrise Daycare Center', 'Flores v. Capital Mall Management',
            'Thompson v. Lakeside School District', 'Mitchell v. Clearview Golf Club',
            'Rivera v. Cascade Transit Authority', 'Grant v. Horizon Delivery Services',
            'Brooks v. Valley Hospital Corporation', 'Dixon v. Elm Street Pharmacy',
            'Anderson v. Metro Tech Solutions', 'Williams v. Central Bank Trust',
            'Johnson v. Premier Medical Group', 'Davis v. Riverside Insurance',
            'Miller v. Northern Electric Coop', 'Wilson v. Southside Community Center',
            'Moore v. Westfield Shopping Mall', 'Taylor v. Highland Construction',
            'Thomas v. Pacific Airways', 'Jackson v. Downtown Hotel Group',
        ];

        const medicalDocTypes = [
            'Medical Records', 'Admission Records', 'Discharge Summary',
            'Treatment Summary', 'Physician Notes', 'Radiology Report',
            'Lab Results', 'Orthopedic Progress Notes', 'Neurology Office Visit',
            'Pharmacy RX History', 'Physical Therapy Records',
        ];

        const folders = [
            'Discovery', 'Depositions', 'Disclosures', 'Expert Discovery',
            'Interrogatories', 'Medical Records', 'Correspondence',
            'Research', 'Evidence', 'Work Product', 'Billing',
        ];

        function randomDate(start, end) {
            const date = new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
            return date.toISOString();
        }

        function generateStatus() {
            const rand = Math.random();
            if (rand < 0.5) {
                return { kind: 'completed' };
            } else if (rand < 0.65) {
                const total = Math.floor(Math.random() * 50) + 10;
                const processed = Math.floor(Math.random() * total);
                return { kind: 'in_progress', processed, total };
            } else if (rand < 0.75) {
                return { kind: 'pending' };
            } else if (rand < 0.85) {
                return { kind: 'review', pendingCount: Math.floor(Math.random() * 15) + 1 };
            } else {
                return { kind: 'not_initiated' };
            }
        }

        function generateMockProjects(count = 274) {
            const projects = [];
            const endDate = new Date();
            const startDate = new Date();
            startDate.setMonth(startDate.getMonth() - 6);

            for (let i = 0; i < count; i++) {
                const status = generateStatus();
                const hasBeenInitiated = status.kind !== 'not_initiated';
                const user = hasBeenInitiated ? users[Math.floor(Math.random() * users.length)] : null;
                
                projects.push({
                    projectId: `proj-${i + 1}`,
                    projectName: projectNames[i % projectNames.length] + (i >= projectNames.length ? ` (${Math.floor(i / projectNames.length) + 1})` : ''),
                    status,
                    initiatedBy: user,
                    initiatedAt: hasBeenInitiated ? randomDate(startDate, endDate) : null,
                });
            }

            projects.sort((a, b) => {
                if (!a.initiatedAt && !b.initiatedAt) return 0;
                if (!a.initiatedAt) return 1;
                if (!b.initiatedAt) return -1;
                return new Date(b.initiatedAt).getTime() - new Date(a.initiatedAt).getTime();
            });

            return projects;
        }

        function generateMockDocuments(projectId) {
            const documents = [];
            
            folders.forEach((folder, folderIndex) => {
                const folderNode = {
                    docId: `folder-${folderIndex}`,
                    fileName: folder,
                    path: `/${folder}`,
                    isFolder: true,
                    included: true,
                    children: [],
                };

                const docCount = Math.floor(Math.random() * 8) + 2;
                for (let i = 0; i < docCount; i++) {
                    const isMedical = folder === 'Medical Records' || Math.random() > 0.7;
                    const fileName = isMedical
                        ? `Smith_v_MercyHospital_${medicalDocTypes[Math.floor(Math.random() * medicalDocTypes.length)]}.pdf`
                        : `Document_${folderIndex}_${i}.docx`;

                    folderNode.children.push({
                        docId: `doc-${folderIndex}-${i}`,
                        fileName,
                        path: `/${folder}/${fileName}`,
                        type: fileName.endsWith('.pdf') ? 'PDF' : 'DOCX',
                        uploadedBy: users[Math.floor(Math.random() * users.length)].name,
                        uploadedAt: randomDate(new Date(2025, 0, 1), new Date()),
                        included: isMedical,
                    });
                }

                documents.push(folderNode);
            });

            return documents;
        }

        function formatDate(dateString) {
            if (!dateString) return '--';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                month: '2-digit', 
                day: '2-digit', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
            });
        }

        function getStatusColor(status) {
            switch (status.kind) {
                case 'completed':
                    return 'bg-green-100 text-green-800 border-green-300';
                case 'in_progress':
                    return 'bg-blue-100 text-blue-800 border-blue-300';
                case 'pending':
                    return 'bg-yellow-100 text-yellow-800 border-yellow-300';
                case 'review':
                    return 'bg-purple-100 text-purple-800 border-purple-300';
                case 'not_initiated':
                    return 'bg-gray-100 text-gray-600 border-gray-300';
                default:
                    return 'bg-gray-100 text-gray-600 border-gray-300';
            }
        }

        function getStatusLabel(status) {
            switch (status.kind) {
                case 'completed':
                    return 'Completed';
                case 'in_progress':
                    return `In progress - ${Math.round((status.processed / status.total) * 100)}%`;
                case 'pending':
                    return 'Pending';
                case 'review':
                    return `Review (${status.pendingCount})`;
                case 'not_initiated':
                    return 'Not initiated';
                default:
                    return 'Unknown';
            }
        }

        // Context
        const SimulationContext = createContext();

        function SimulationProvider({ children }) {
            const [projects, setProjects] = useState(() => generateMockProjects());
            const [selectedProjects, setSelectedProjects] = useState(new Set());
            const [currentView, setCurrentView] = useState('dashboard');
            const [currentProjectId, setCurrentProjectId] = useState(null);

            const updateProjectStatus = useCallback((projectId, status) => {
                setProjects(prev => prev.map(p =>
                    p.projectId === projectId ? { ...p, status } : p
                ));
            }, []);

            const initiateProjects = useCallback((projectIds) => {
                const now = new Date().toISOString();
                const user = { id: 'current', name: 'Current User' };

                setProjects(prev => prev.map(project => {
                    if (projectIds.includes(project.projectId)) {
                        return {
                            ...project,
                            status: { kind: 'pending' },
                            initiatedAt: now,
                            initiatedBy: user,
                        };
                    }
                    return project;
                }));

                projectIds.forEach((projectId, index) => {
                    setTimeout(() => {
                        updateProjectStatus(projectId, { 
                            kind: 'in_progress', 
                            processed: 0, 
                            total: Math.floor(Math.random() * 30) + 20 
                        });
                        
                        let progress = 0;
                        const total = Math.floor(Math.random() * 30) + 20;
                        
                        const interval = setInterval(() => {
                            progress += Math.floor(Math.random() * 5) + 1;
                            
                            if (progress >= total) {
                                updateProjectStatus(projectId, { kind: 'completed' });
                                clearInterval(interval);
                            } else {
                                updateProjectStatus(projectId, { 
                                    kind: 'in_progress', 
                                    processed: progress, 
                                    total 
                                });
                            }
                        }, 1000);
                    }, (index + 1) * 2000);
                });
            }, [updateProjectStatus]);

            const toggleProjectSelection = useCallback((projectId) => {
                setSelectedProjects(prev => {
                    const newSet = new Set(prev);
                    if (newSet.has(projectId)) {
                        newSet.delete(projectId);
                    } else {
                        newSet.add(projectId);
                    }
                    return newSet;
                });
            }, []);

            const selectAllProjects = useCallback((projectIds) => {
                setSelectedProjects(new Set(projectIds));
            }, []);

            const clearSelection = useCallback(() => {
                setSelectedProjects(new Set());
            }, []);

            const refreshProjects = useCallback(() => {
                setProjects(generateMockProjects());
            }, []);

            return React.createElement(SimulationContext.Provider, {
                value: {
                    projects,
                    selectedProjects,
                    toggleProjectSelection,
                    selectAllProjects,
                    clearSelection,
                    initiateProjects,
                    updateProjectStatus,
                    refreshProjects,
                    currentView,
                    setCurrentView,
                    currentProjectId,
                    setCurrentProjectId,
                }
            }, children);
        }

        function useSimulation() {
            return useContext(SimulationContext);
        }

        // Components
        function StatusBadge({ status, className = '' }) {
            return React.createElement('span', {
                className: `inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium border ${getStatusColor(status)} ${className}`
            }, getStatusLabel(status));
        }

        function Layout({ children }) {
            const { currentView } = useSimulation();
            const isDashboard = currentView === 'dashboard';

            return React.createElement('div', { className: 'min-h-screen bg-gray-50' },
                React.createElement('header', { className: 'bg-gray-900 text-white' },
                    React.createElement('div', { className: 'flex items-center justify-between px-6 h-14' },
                        React.createElement('div', { className: 'flex items-center space-x-4' },
                            React.createElement(Menu, { className: 'w-5 h-5' }),
                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement(Home, { className: 'w-5 h-5' }),
                                React.createElement('span', { className: 'font-medium' }, 'Feed')
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement(FileText, { className: 'w-5 h-5' }),
                                React.createElement('span', null, 'Tasks')
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement(FolderOpen, { className: 'w-5 h-5' }),
                                React.createElement('span', null, 'Projects')
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement(FileText, { className: 'w-5 h-5' }),
                                React.createElement('span', null, 'Documents')
                            )
                        ),
                        React.createElement('div', { className: 'flex items-center space-x-4' },
                            React.createElement('div', { className: 'text-2xl font-bold' }, 'Filevine'),
                            React.createElement('input', {
                                type: 'text',
                                placeholder: 'Search for a project, contact, tag, etc.',
                                className: 'bg-gray-800 text-white placeholder-gray-400 px-4 py-1.5 rounded w-80 text-sm'
                            }),
                            React.createElement(Bell, { className: 'w-5 h-5' }),
                            React.createElement(Settings, { className: 'w-5 h-5' }),
                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement(User, { className: 'w-8 h-8 p-1 bg-gray-700 rounded-full' }),
                                React.createElement(ChevronRight, { className: 'w-4 h-4' })
                            )
                        )
                    )
                ),
                isDashboard && React.createElement('div', { className: 'bg-white border-b' },
                    React.createElement('div', { className: 'px-6 py-3' },
                        React.createElement('div', { className: 'flex items-center space-x-2 text-sm' },
                            React.createElement('span', { className: 'font-medium' }, 'Advanced'),
                            React.createElement('select', { className: 'border rounded px-2 py-1' },
                                React.createElement('option', null, 'Org')
                            )
                        )
                    )
                ),
                React.createElement('div', { className: 'flex' },
                    isDashboard && React.createElement('aside', { className: 'w-64 bg-white border-r min-h-screen' },
                        React.createElement('div', { className: 'p-4' },
                            React.createElement('div', { className: 'mb-2' },
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Filter Menu',
                                    className: 'w-full px-3 py-1.5 border rounded text-sm'
                                })
                            ),
                            React.createElement('nav', { className: 'space-y-1' },
                                React.createElement('div', {
                                    className: 'flex items-center space-x-2 px-3 py-2 bg-cyan-50 text-cyan-600 rounded font-medium cursor-pointer'
                                },
                                    React.createElement('div', { className: 'w-1 h-1 bg-cyan-600 rounded-full' }),
                                    React.createElement('span', null, 'MedChron Dashboard')
                                )
                            )
                        )
                    ),
                    React.createElement('main', { className: 'flex-1' }, children)
                )
            );
        }

        function Dashboard() {
            const { projects, selectedProjects, toggleProjectSelection, selectAllProjects, 
                    clearSelection, initiateProjects, refreshProjects, setCurrentView, setCurrentProjectId } = useSimulation();
            const [searchTerm, setSearchTerm] = useState('');
            const [statusFilter, setStatusFilter] = useState(new Set());
            const [sortBy, setSortBy] = useState('initiatedAt');
            const [sortDirection, setSortDirection] = useState('desc');
            const [currentPage, setCurrentPage] = useState(1);
            const [pageSize, setPageSize] = useState(10);
            const [showConfirmModal, setShowConfirmModal] = useState(false);

            const stats = useMemo(() => {
                return {
                    completed: projects.filter(p => p.status.kind === 'completed').length,
                    inProgress: projects.filter(p => p.status.kind === 'in_progress').length,
                    pending: projects.filter(p => p.status.kind === 'pending').length,
                    notInitiated: projects.filter(p => p.status.kind === 'not_initiated').length,
                    review: projects.filter(p => p.status.kind === 'review').length,
                };
            }, [projects]);

            const filteredProjects = useMemo(() => {
                return projects.filter(project => {
                    const matchesSearch = project.projectName.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesStatus = statusFilter.size === 0 || statusFilter.has(project.status.kind);
                    return matchesSearch && matchesStatus;
                });
            }, [projects, searchTerm, statusFilter]);

            const sortedProjects = useMemo(() => {
                const sorted = [...filteredProjects].sort((a, b) => {
                    let comparison = 0;
                    
                    if (sortBy === 'projectName') {
                        comparison = a.projectName.localeCompare(b.projectName);
                    } else if (sortBy === 'initiatedAt') {
                        const dateA = a.initiatedAt ? new Date(a.initiatedAt).getTime() : 0;
                        const dateB = b.initiatedAt ? new Date(b.initiatedAt).getTime() : 0;
                        comparison = dateA - dateB;
                    } else if (sortBy === 'status') {
                        comparison = a.status.kind.localeCompare(b.status.kind);
                    }
                    
                    return sortDirection === 'asc' ? comparison : -comparison;
                });
                
                return sorted;
            }, [filteredProjects, sortBy, sortDirection]);

            const paginatedProjects = useMemo(() => {
                const startIndex = (currentPage - 1) * pageSize;
                return sortedProjects.slice(startIndex, startIndex + pageSize);
            }, [sortedProjects, currentPage, pageSize]);

            const totalPages = Math.ceil(sortedProjects.length / pageSize);

            const handleSort = (field) => {
                if (field === sortBy) {
                    setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc');
                } else {
                    setSortBy(field);
                    setSortDirection('asc');
                }
            };

            const handleSelectAll = () => {
                if (selectedProjects.size === paginatedProjects.length) {
                    clearSelection();
                } else {
                    selectAllProjects(paginatedProjects.map(p => p.projectId));
                }
            };

            const handleInitiate = () => {
                const projectsToInitiate = Array.from(selectedProjects);
                initiateProjects(projectsToInitiate);
                clearSelection();
                setShowConfirmModal(false);
            };

            const toggleStatusFilter = (status) => {
                setStatusFilter(prev => {
                    const newSet = new Set(prev);
                    if (newSet.has(status)) {
                        newSet.delete(status);
                    } else {
                        newSet.add(status);
                    }
                    return newSet;
                });
            };

            const navigateToProject = (projectId) => {
                setCurrentProjectId(projectId);
                setCurrentView('verification');
            };

            return React.createElement('div', { className: 'p-6' },
                React.createElement('div', { className: 'mb-6' },
                    React.createElement('h1', { className: 'text-2xl font-bold text-gray-900 mb-6' }, 'MedChron Dashboard'),
                    
                    React.createElement('div', { className: 'grid grid-cols-5 gap-4 mb-6' },
                        React.createElement('div', { className: 'bg-white rounded-lg border p-4' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-3xl font-bold text-gray-900' }, stats.completed),
                                    React.createElement('div', { className: 'text-sm text-gray-600' }, 'Completed')
                                ),
                                React.createElement(CheckCircle2, { className: 'w-8 h-8 text-green-500' })
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg border p-4' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-3xl font-bold text-gray-900' }, stats.inProgress),
                                    React.createElement('div', { className: 'text-sm text-gray-600' }, 'In progress')
                                ),
                                React.createElement(Clock, { className: 'w-8 h-8 text-blue-500' })
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg border p-4' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-3xl font-bold text-gray-900' }, stats.pending),
                                    React.createElement('div', { className: 'text-sm text-gray-600' }, 'Pending')
                                ),
                                React.createElement(Hourglass, { className: 'w-8 h-8 text-yellow-500' })
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg border p-4' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-3xl font-bold text-gray-900' }, stats.notInitiated),
                                    React.createElement('div', { className: 'text-sm text-gray-600' }, 'Not initiated')
                                ),
                                React.createElement(Info, { className: 'w-8 h-8 text-gray-400' })
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg border p-4' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-3xl font-bold text-gray-900' }, stats.review),
                                    React.createElement('div', { className: 'text-sm text-gray-600' }, 'Review')
                                ),
                                React.createElement(AlertCircle, { className: 'w-8 h-8 text-purple-500' })
                            )
                        )
                    ),

                    React.createElement('div', { className: 'bg-white rounded-lg border' },
                        React.createElement('div', { className: 'p-4 border-b' },
                            React.createElement('div', { className: 'flex items-center justify-between mb-4' },
                                React.createElement('div', { className: 'flex-1 relative' },
                                    React.createElement(Search, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4' }),
                                    React.createElement('input', {
                                        type: 'text',
                                        placeholder: 'Search by project name',
                                        value: searchTerm,
                                        onChange: (e) => setSearchTerm(e.target.value),
                                        className: 'w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500'
                                    })
                                ),
                                React.createElement('div', { className: 'flex items-center space-x-2 ml-4' },
                                    React.createElement('button', {
                                        onClick: () => refreshProjects(),
                                        className: 'p-2 hover:bg-gray-100 rounded',
                                        title: 'Refresh'
                                    }, React.createElement(RefreshCw, { className: 'w-4 h-4' })),
                                    selectedProjects.size > 0 && React.createElement('button', {
                                        onClick: () => setShowConfirmModal(true),
                                        className: 'px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600'
                                    }, `Initiate (${selectedProjects.size})`)
                                )
                            ),

                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                React.createElement('span', { className: 'text-sm text-gray-600' }, 'Filter by status:'),
                                ['completed', 'in_progress', 'pending', 'not_initiated', 'review'].map(status =>
                                    React.createElement('button', {
                                        key: status,
                                        onClick: () => toggleStatusFilter(status),
                                        className: `px-3 py-1 text-xs rounded-full border transition-colors ${
                                            statusFilter.has(status)
                                                ? 'bg-cyan-100 text-cyan-700 border-cyan-300'
                                                : 'bg-white text-gray-600 border-gray-300 hover:bg-gray-50'
                                        }`
                                    }, status.replace('_', ' '))
                                )
                            )
                        ),

                        React.createElement('div', { className: 'overflow-x-auto' },
                            React.createElement('table', { className: 'w-full' },
                                React.createElement('thead', { className: 'bg-gray-50 border-b' },
                                    React.createElement('tr', null,
                                        React.createElement('th', { className: 'w-12 px-4 py-3' },
                                            React.createElement('input', {
                                                type: 'checkbox',
                                                checked: selectedProjects.size === paginatedProjects.length && paginatedProjects.length > 0,
                                                onChange: handleSelectAll,
                                                className: 'rounded'
                                            })
                                        ),
                                        React.createElement('th', { className: 'px-4 py-3 text-left' },
                                            React.createElement('button', {
                                                onClick: () => handleSort('projectName'),
                                                className: 'flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-gray-900'
                                            },
                                                React.createElement('span', null, 'Project name'),
                                                sortBy === 'projectName' && (
                                                    sortDirection === 'asc' ? 
                                                    React.createElement(ChevronUp, { className: 'w-4 h-4' }) : 
                                                    React.createElement(ChevronDown, { className: 'w-4 h-4' })
                                                )
                                            )
                                        ),
                                        React.createElement('th', { className: 'px-4 py-3 text-left' },
                                            React.createElement('button', {
                                                onClick: () => handleSort('status'),
                                                className: 'flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-gray-900'
                                            },
                                                React.createElement('span', null, 'MedChron status'),
                                                sortBy === 'status' && (
                                                    sortDirection === 'asc' ? 
                                                    React.createElement(ChevronUp, { className: 'w-4 h-4' }) : 
                                                    React.createElement(ChevronDown, { className: 'w-4 h-4' })
                                                )
                                            )
                                        ),
                                        React.createElement('th', { className: 'px-4 py-3 text-left' },
                                            React.createElement('button', {
                                                onClick: () => handleSort('initiatedAt'),
                                                className: 'flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-gray-900'
                                            },
                                                React.createElement('span', null, 'Initiation date'),
                                                sortBy === 'initiatedAt' && (
                                                    sortDirection === 'asc' ? 
                                                    React.createElement(ChevronUp, { className: 'w-4 h-4' }) : 
                                                    React.createElement(ChevronDown, { className: 'w-4 h-4' })
                                                )
                                            )
                                        ),
                                        React.createElement('th', { className: 'px-4 py-3 text-left text-sm font-medium text-gray-700' }, 'Initiated by')
                                    )
                                ),
                                React.createElement('tbody', { className: 'divide-y' },
                                    paginatedProjects.map((project) =>
                                        React.createElement('tr', { key: project.projectId, className: 'hover:bg-gray-50' },
                                            React.createElement('td', { className: 'px-4 py-3' },
                                                React.createElement('input', {
                                                    type: 'checkbox',
                                                    checked: selectedProjects.has(project.projectId),
                                                    onChange: () => toggleProjectSelection(project.projectId),
                                                    className: 'rounded'
                                                })
                                            ),
                                            React.createElement('td', { className: 'px-4 py-3' },
                                                React.createElement('button', {
                                                    onClick: () => navigateToProject(project.projectId),
                                                    className: 'text-blue-600 hover:underline font-medium'
                                                }, project.projectName)
                                            ),
                                            React.createElement('td', { className: 'px-4 py-3' },
                                                React.createElement(StatusBadge, { status: project.status })
                                            ),
                                            React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-600' },
                                                formatDate(project.initiatedAt)
                                            ),
                                            React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-600' },
                                                project.initiatedBy?.name || '--'
                                            )
                                        )
                                    )
                                )
                            )
                        ),

                        React.createElement('div', { className: 'p-4 border-t' },
                            React.createElement('div', { className: 'flex items-center justify-between' },
                                React.createElement('div', { className: 'text-sm text-gray-600' },
                                    sortedProjects.length > 0 ? (
                                        `${(currentPage - 1) * pageSize + 1} to ${Math.min(currentPage * pageSize, sortedProjects.length)} of ${sortedProjects.length} MedChrons`
                                    ) : (
                                        'No projects found'
                                    )
                                ),
                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                    React.createElement('span', { className: 'text-sm text-gray-600' }, 'Show'),
                                    React.createElement('select', {
                                        value: pageSize,
                                        onChange: (e) => {
                                            setPageSize(Number(e.target.value));
                                            setCurrentPage(1);
                                        },
                                        className: 'border rounded px-2 py-1 text-sm'
                                    },
                                        React.createElement('option', { value: 10 }, '10'),
                                        React.createElement('option', { value: 25 }, '25'),
                                        React.createElement('option', { value: 50 }, '50')
                                    ),
                                    React.createElement('div', { className: 'flex space-x-1' },
                                        React.createElement('button', {
                                            onClick: () => setCurrentPage(1),
                                            disabled: currentPage === 1,
                                            className: 'px-2 py-1 border rounded disabled:opacity-50'
                                        }, '≪'),
                                        React.createElement('button', {
                                            onClick: () => setCurrentPage(prev => Math.max(1, prev - 1)),
                                            disabled: currentPage === 1,
                                            className: 'px-2 py-1 border rounded disabled:opacity-50'
                                        }, '‹'),
                                        React.createElement('span', { className: 'px-3 py-1 text-sm' },
                                            `Page ${currentPage} of ${totalPages || 1}`
                                        ),
                                        React.createElement('button', {
                                            onClick: () => setCurrentPage(prev => Math.min(totalPages, prev + 1)),
                                            disabled: currentPage === totalPages,
                                            className: 'px-2 py-1 border rounded disabled:opacity-50'
                                        }, '›'),
                                        React.createElement('button', {
                                            onClick: () => setCurrentPage(totalPages),
                                            disabled: currentPage === totalPages,
                                            className: 'px-2 py-1 border rounded disabled:opacity-50'
                                        }, '≫')
                                    )
                                )
                            )
                        )
                    )
                ),

                showConfirmModal && React.createElement('div', { className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50' },
                    React.createElement('div', { className: 'bg-white rounded-lg p-6 max-w-md' },
                        React.createElement('h3', { className: 'text-lg font-semibold mb-4' }, 'Confirm Bulk Initiation'),
                        React.createElement('p', { className: 'text-gray-600 mb-6' },
                            `You are about to initiate MedChron for ${selectedProjects.size} project${selectedProjects.size > 1 ? 's' : ''}. This action will process medical documents and may incur costs.`
                        ),
                        React.createElement('div', { className: 'flex space-x-3 justify-end' },
                            React.createElement('button', {
                                onClick: () => setShowConfirmModal(false),
                                className: 'px-4 py-2 border rounded-lg hover:bg-gray-50'
                            }, 'Cancel'),
                            React.createElement('button', {
                                onClick: handleInitiate,
                                className: 'px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600'
                            }, 'Initiate MedChron')
                        )
                    )
                )
            );
        }

        function ProjectVerification() {
            const { projects, updateProjectStatus, currentProjectId, setCurrentView } = useSimulation();
            const [candidates, setCandidates] = useState([]);
            const [expandedFolders, setExpandedFolders] = useState(new Set());
            const [isRunning, setIsRunning] = useState(false);

            const project = useMemo(() => {
                return projects.find(p => p.projectId === currentProjectId);
            }, [projects, currentProjectId]);

            useEffect(() => {
                if (currentProjectId) {
                    const docs = generateMockDocuments(currentProjectId);
                    setCandidates(docs);
                    setExpandedFolders(new Set(docs.map(d => d.docId)));
                }
            }, [currentProjectId]);

            const toggleFolder = (folderId) => {
                setExpandedFolders(prev => {
                    const newSet = new Set(prev);
                    if (newSet.has(folderId)) {
                        newSet.delete(folderId);
                    } else {
                        newSet.add(folderId);
                    }
                    return newSet;
                });
            };

            const toggleDocumentInclusion = (docId, parentId) => {
                setCandidates(prev => {
                    return prev.map(folder => {
                        if (parentId && folder.docId === parentId && folder.children) {
                            return {
                                ...folder,
                                children: folder.children.map(doc =>
                                    doc.docId === docId ? { ...doc, included: !doc.included } : doc
                                ),
                            };
                        }
                        return folder;
                    });
                });
            };

            const includedCount = useMemo(() => {
                let count = 0;
                candidates.forEach(folder => {
                    if (folder.children) {
                        count += folder.children.filter(doc => doc.included).length;
                    }
                });
                return count;
            }, [candidates]);

            const handleRunMedChron = () => {
                if (!currentProjectId || !project) return;
                
                setIsRunning(true);
                updateProjectStatus(currentProjectId, { kind: 'pending' });
                
                setTimeout(() => {
                    updateProjectStatus(currentProjectId, {
                        kind: 'in_progress',
                        processed: 0,
                        total: includedCount,
                    });
                    
                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += Math.floor(Math.random() * 3) + 1;
                        
                        if (progress >= includedCount) {
                            updateProjectStatus(currentProjectId, { kind: 'completed' });
                            clearInterval(interval);
                            setIsRunning(false);
                        } else {
                            updateProjectStatus(currentProjectId, {
                                kind: 'in_progress',
                                processed: progress,
                                total: includedCount,
                            });
                        }
                    }, 1000);
                }, 2000);
            };

            return React.createElement('div', { className: 'min-h-screen bg-gray-50' },
                React.createElement('div', { className: 'bg-white border-b' },
                    React.createElement('div', { className: 'px-6 py-4 flex items-center justify-between' },
                        React.createElement('div', { className: 'flex items-center space-x-4' },
                            React.createElement('button', {
                                onClick: () => setCurrentView('dashboard'),
                                className: 'text-gray-600 hover:text-gray-900'
                            }, React.createElement(ChevronLeft, { className: 'w-5 h-5' })),
                            React.createElement('div', { className: 'flex items-center space-x-2 text-sm' },
                                React.createElement('span', null, 'Feed'),
                                React.createElement(ChevronRight, { className: 'w-4 h-4 text-gray-400' }),
                                React.createElement('span', null, 'Tasks'),
                                React.createElement(ChevronRight, { className: 'w-4 h-4 text-gray-400' }),
                                React.createElement('span', null, 'Project Hub'),
                                React.createElement(ChevronRight, { className: 'w-4 h-4 text-gray-400' }),
                                React.createElement('span', null, 'Documents')
                            )
                        )
                    )
                ),

                React.createElement('div', { className: 'px-6 py-4' },
                    React.createElement('div', { className: 'mb-6' },
                        React.createElement('div', { className: 'flex items-center justify-between mb-4' },
                            React.createElement('div', null,
                                React.createElement('h1', { className: 'text-2xl font-bold text-gray-900 mb-2' },
                                    project?.projectName || 'Project'
                                ),
                                React.createElement('div', { className: 'flex items-center space-x-4' },
                                    React.createElement('span', { className: 'text-sm text-gray-600' }, 'MedChron Status:'),
                                    project && React.createElement(StatusBadge, { status: project.status })
                                )
                            ),
                            !isRunning && project?.status.kind !== 'in_progress' && React.createElement('button', {
                                onClick: handleRunMedChron,
                                disabled: includedCount === 0,
                                className: `flex items-center space-x-2 px-4 py-2 rounded-lg font-medium ${
                                    includedCount > 0
                                        ? 'bg-cyan-500 text-white hover:bg-cyan-600'
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`
                            },
                                React.createElement(PlayCircle, { className: 'w-5 h-5' }),
                                React.createElement('span', null, 'Initiate MedChron')
                            )
                        ),

                        project?.status.kind === 'in_progress' && React.createElement('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4' },
                            React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                                React.createElement('span', { className: 'text-sm font-medium text-blue-900' }, 'Processing Documents'),
                                React.createElement('span', { className: 'text-sm text-blue-700' },
                                    `${project.status.processed} / ${project.status.total}`
                                )
                            ),
                            React.createElement('div', { className: 'w-full bg-blue-100 rounded-full h-2' },
                                React.createElement('div', {
                                    className: 'bg-blue-500 h-2 rounded-full transition-all duration-300',
                                    style: { width: `${(project.status.processed / project.status.total) * 100}%` }
                                })
                            )
                        )
                    ),

                    React.createElement('div', { className: 'bg-white rounded-lg border' },
                        React.createElement('div', { className: 'p-4 border-b' },
                            React.createElement('h2', { className: 'text-lg font-semibold mb-2' }, 'Welcome to MedChron by Filevine'),
                            React.createElement('p', { className: 'text-sm text-gray-600 mb-4' },
                                'MedChron uses AI to generate a comprehensive medical chronology based on all relevant documents uploaded to this project.'
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: 'font-medium mb-1' }, 'Source documents'),
                                React.createElement('p', { className: 'text-sm text-gray-600' },
                                    `${includedCount} document${includedCount !== 1 ? 's' : ''} from this project will be included as sources to initiate MedChron`
                                )
                            )
                        ),

                        React.createElement('div', { className: 'divide-y' },
                            candidates.map((folder) =>
                                React.createElement('div', { key: folder.docId },
                                    React.createElement('div', { className: 'flex items-center px-4 py-2 hover:bg-gray-50' },
                                        React.createElement('button', {
                                            onClick: () => toggleFolder(folder.docId),
                                            className: 'flex items-center space-x-2 flex-1 text-left'
                                        },
                                            React.createElement(ChevronRight, {
                                                className: `w-4 h-4 transition-transform ${
                                                    expandedFolders.has(folder.docId) ? 'rotate-90' : ''
                                                }`
                                            }),
                                            React.createElement(FolderOpen, { className: 'w-4 h-4 text-yellow-600' }),
                                            React.createElement('span', { className: 'font-medium' }, folder.fileName),
                                            React.createElement('span', { className: 'text-sm text-gray-500' },
                                                ` (${folder.children?.filter(d => d.included).length || 0} included)`
                                            )
                                        )
                                    ),

                                    expandedFolders.has(folder.docId) && folder.children && React.createElement('div', { className: 'bg-gray-50 border-t' },
                                        folder.children.map((doc) =>
                                            React.createElement('div', {
                                                key: doc.docId,
                                                className: 'flex items-center px-8 py-2 hover:bg-gray-100 border-b border-gray-200'
                                            },
                                                React.createElement('input', {
                                                    type: 'checkbox',
                                                    checked: doc.included,
                                                    onChange: () => toggleDocumentInclusion(doc.docId, folder.docId),
                                                    className: 'mr-3'
                                                }),
                                                React.createElement(FileText, { className: 'w-4 h-4 text-red-500 mr-2' }),
                                                React.createElement('div', { className: 'flex-1' },
                                                    React.createElement('div', { className: 'font-medium text-sm' }, doc.fileName),
                                                    React.createElement('div', { className: 'text-xs text-gray-500' },
                                                        `Uploaded by ${doc.uploadedBy}`
                                                    )
                                                ),
                                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                                    doc.included ? 
                                                    React.createElement('span', { className: 'flex items-center text-xs text-green-600' },
                                                        React.createElement(Check, { className: 'w-3 h-3 mr-1' }),
                                                        'Included'
                                                    ) :
                                                    React.createElement('span', { className: 'flex items-center text-xs text-gray-400' },
                                                        React.createElement(X, { className: 'w-3 h-3 mr-1' }),
                                                        'Excluded'
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }

        function App() {
            const { currentView } = useSimulation();

            return React.createElement(Layout, null,
                currentView === 'dashboard' ? React.createElement(Dashboard) : React.createElement(ProjectVerification)
            );
        }

        function Root() {
            return React.createElement(SimulationProvider, null,
                React.createElement(App)
            );
        }

        ReactDOM.render(React.createElement(Root), document.getElementById('root'));
    </script>
</body>
</html>